ğŸ•“ MediaTools.Find-ValidTimestamp Function Documentation

Function:
Find-ValidTimestamp

Description:
Attempts to extract the most reliable timestamp from a given metadata hashtable, following a prioritized list of known timestamp fields.

Input Type:
1. $metadata [hashtable] â€” A hashtable containing timestamp-related metadata from various sources (EXIF, ffprobe, Google JSON, etc.)

Output Type:
âœ… [string] â€” Standardized timestamp string (format: yyyy:MM:dd HH:mm:ss+00:00)
âŒ [null] â€” If no valid timestamp is found or input is invalid

Algorithm (Pseudo-code):
1. If $metadata is null or empty
   â†’ Return null

2. Define list of known timestamp fields in priority order:
   â†’ e.g., "DateTimeOriginal", "CreateDate", "FileModifyDate", "QuickTime:CreateDate"

3. For each field in priority list:
   3.1 If field exists in $metadata and is not null:
       a. Call Standardize_TimeStamp($metadata[$field])
       b. If result is not null â†’ return it

4. If none of the fields yield a valid result:
   â†’ Return null

Function Calls:
ğŸ”¹ MediaTools.Standardize_TimeStamp â€” Converts raw or varied timestamp formats into the pipeline-standard form

Possible Issues:
âœ… Covered: Missing or null metadata entries
âœ… Covered: Multiple common timestamp field names are checked
âŒ Not Covered: Contradictory timestamps (e.g., conflicting values across sources)
âŒ Not Covered: Non-string or malformed timestamp values
âŒ Not Covered: Nested timestamp structures or array-based metadata
