`utils.parse_timestamp` Function Documentation

Function:
parse_timestamp

Description:
Attempts to parse a timestamp string into a `datetime` object with UTC offset. If parsing fails or input is invalid, returns `None`.

Input Type:

1. timestamp_str [str] â€” Timestamp string to be parsed

Output Type:
âœ… [datetime.datetime] (timezone-aware in UTC)
âŒ None on parsing failure or if input is not a valid timestamp

Algorithm (Pseudo-code):

1. Validate Input
   1.1 If `timestamp_str` is `None` or empty â†’ âŒ return `None`

2. Normalize String
   2.1 If `timestamp_str` ends with `'Z'` â†’ Replace with `'+00:00'`
   2.2 Remove leading/trailing spaces

3. Try Parsing as ISO Format
   3.1 Try `datetime.fromisoformat(timestamp_str)`
       ğŸ”¹ If succeeds â†’ Go to step 4
       ğŸ”¹ If fails â†’ Continue

4. Fallback Parsing
   4.1 Try `datetime.strptime(timestamp_str, "%Y:%m:%d %H:%M:%S%z")`
       ğŸ”¹ If succeeds â†’ Go to step 5
       ğŸ”¹ If fails â†’ âŒ return `None`

5. Normalize Result
   5.1 Set `tzinfo` to UTC if not already set
   5.2 âœ… Return parsed `datetime` object

Function Calls:

* ğŸ”¹ datetime.fromisoformat() â€” First attempt to parse
* ğŸ”¹ datetime.strptime() â€” Fallback parser
* ğŸ”¹ datetime.replace(tzinfo=timezone.utc) â€” Normalize to UTC

Possible Issues:

* âœ… Covered: Handles `'Z'` (Zulu) suffix
* âœ… Covered: Returns `None` on parse failure
* âœ… Covered: Validates empty input
* âŒ Not Covered: Partial or malformed timestamp formats
* âŒ Not Covered: Non-ASCII symbols in timestamp
* âŒ Not Covered: Input with extra fields (e.g., milliseconds, microseconds)